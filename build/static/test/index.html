<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Functional programming test suite</title>

  <!-- Core files for QUnit styling and functionality -->
  <link rel="stylesheet" href="qunit.css">
  <script src="qunit.js"></script>

  <!-- Core jQuery used by fixtures -->
  <script src="jquery.js"></script>

  <!-- For detecting code coverage -->
  <script src="blanket.min.js"></script>

  <!-- The code that's getting tested -->
  <script src="../app.js" data-cover></script>

  <script>

    // Start 'log()' tests
    QUnit.test("'log()' should return a string with at least 1 character", function(assert) {

      var myString = "a string";

      assert.equal(log(myString), "a string", "the string was returned successfully!");

      assert.equal(myString.length >= 1, 1, "the string has at least 1 character!");
    });


    /* Error checking of primitive JS types passed to 'log()' as a
     * parameter
     */
    QUnit.test("'log()' should throw an error if no parameter is passed or the parameter is not a string", function() {

      var func = function(){},
          mySymbol = Symbol("a symbol");

      raises(function() {
        log();
      }, Error, "it threw an error since there's no parameter passed");

      raises(function() {
        log(func);
      }, Error, "it threw an error since a function was passed as a parameter");

      raises(function() {
        log(56452452435245);
      }, Error, "it threw an error since a number was passed as a parameter");

      raises(function() {
        log(true);
      }, Error, "it threw an error since a boolean was passed as a parameter");

      raises(function() {
        log([]);
      }, Error, "it threw an error since an array was passed as a parameter");

      raises(function() {
        log({});
      }, Error, "it threw an error since an object was passed as a parameter");

      raises(function() {
        log(mySymbol);
      }, Error, "it threw an error since an ES2015 symbol was passed as a parameter");

      raises(function() {
        log(undefined);
      }, Error, "it threw an error since parameter is undefined");

      raises(function() {
        log(null);
      }, Error, "it threw an error since parameter is null");

    });


    // Start 'doSomething()' tests
    QUnit.test("doSomething() should return a function", function(assert) {
      function returnFunc(){ return; }
      var  myFunc = function(returnFunc){};
      assert.equal(doSomething(myFunc), myFunc(), "the function was returned successfully!");
    });



    // Start 'Carousel()' tests
    QUnit.test("Carousel() should return a string and a number", function(assert) {

      /* Best to test using "new" since it's a constructor function to
       * prevent certain strict mode bugs http://bit.ly/2lRbngj
       */
      assert.ok(new Carousel("some-element", 4545435234), "a string and a number were returned!");
    });


    QUnit.test("it should append a div that has text and a class named 'some-class", function(assert) {

      var fixture = document.getElementById("qunit-fixture"),
          links = fixture.getElementsByTagName("div");

      addMagic("div", "qunit-fixture", "text", "some-class");

      assert.equal($("div", fixture).length, 1, "div added successfully!");

      assert.equal(links[0].innerHTML, "text", "the div has text!");

      assert.equal($(links[0]).hasClass("some-class"), 1, "the div has a class named 'some-class'!");
    });

</script>

</head>
<body>

  <!-- QUnit test results go here -->
  <div id="qunit"> </div>

  <!-- DOM elements that QUnit will test go here -->
  <div id="qunit-fixture"></div>

</body>
</html>